import{r as t,j as e}from"./react-vendor-YaBxlGmv.js";import{J as F,K as L,L as U}from"./vendor-DkYvuI6X.js";import{a as C,B as w,b as J,c as D,d as y,n as B,R as q,o as A,p as P,q as $,r as H,s as _,t as z,u as G}from"./mui-vendor-CkroyNbr.js";/* empty css                  */import{R as K}from"./ReplyModel-zHlKCMZ1.js";const V=({tweet:l,user:i,onDelete:x,onEdit:h})=>{var I;const[n,d]=t.useState(null),[c,j]=t.useState(!1),[m,k]=t.useState(l.retweets||0),[u,o]=t.useState(l.likes||0),[f,g]=t.useState(!1),[N,s]=t.useState(!1),[a,p]=t.useState(l.text),r=()=>g(!0),T=()=>g(!1),E=v=>d(v.currentTarget),S=()=>d(null),R=()=>k(m+1),b=()=>{j(!c),o(c?u-1:u+1)},M=()=>{s(!0),S()},O=()=>{h(l.id,a),s(!1)};return e.jsxs("div",{className:"tweet-card",children:[e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx(C,{children:e.jsx("img",{src:"https://images.pexels.com/photos/31280266/pexels-photo-31280266/free-photo-of-curved-architectural-shadows-in-abstract-light.jpeg",alt:"Profile Avatar"})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 cursor-pointer",children:[e.jsx("span",{className:"username fw-bold d-block",children:(i==null?void 0:i.fullName)||"Unknown"}),e.jsxs("span",{className:"text-muted",children:["@",((I=i==null?void 0:i.fullName)==null?void 0:I.split(" ").join("_").toLowerCase())||"unknown_user"]})]}),e.jsxs("div",{children:[e.jsx(w,{id:"basic-button","aria-controls":n?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":n?"true":void 0,onClick:E,className:"more-options",children:e.jsx(J,{})}),e.jsxs(D,{id:"basic-menu",anchorEl:n,open:!!n,onClose:S,children:[e.jsx(y,{onClick:M,children:"Edit"}),e.jsx(y,{onClick:()=>{x(l.id),S()},children:"Delete"})]})]})]}),e.jsxs("div",{className:"content-container",children:[N?e.jsxs("div",{children:[e.jsx("input",{type:"text",className:"form-control",value:a,onChange:v=>p(v.target.value)}),e.jsx(w,{onClick:O,children:"Save"})]}):e.jsx("p",{className:"mb-2",children:l.text}),l.image&&e.jsx("img",{src:l.image,className:"tweet-img",alt:"Tweet"})]}),e.jsx("div",{className:"d-flex justify-content-between mt-3",children:e.jsxs("div",{className:"d-flex align-items-center gap-3 text-muted",children:[e.jsx(B,{className:"cursor-pointer",onClick:r}),e.jsx("span",{children:l.comments||0}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(q,{className:"cursor-pointer",onClick:R}),e.jsx("span",{children:m})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[c?e.jsx(A,{className:"text-danger cursor-pointer",onClick:b}):e.jsx(P,{className:"cursor-pointer",onClick:b}),e.jsx("span",{children:u})]}),e.jsx($,{className:"cursor-pointer"}),e.jsx(H,{className:"cursor-pointer"}),e.jsx("span",{children:"10k"})]})})]})]}),e.jsx(K,{open:f,handleClose:T})]})},W=L().shape({content:U().required("Tweet text is required")}),se=()=>{const[l,i]=t.useState(!1),[x,h]=t.useState(null),[n,d]=t.useState([]),[c,j]=t.useState(null),[m,k]=t.useState(localStorage.getItem("theme")==="dark");t.useEffect(()=>{document.body.classList.toggle("dark-mode",m),localStorage.setItem("theme",m?"dark":"light")},[m]),t.useEffect(()=>{const s=localStorage.getItem("user"),a=localStorage.getItem("tweets");s&&j(JSON.parse(s)),a&&d(JSON.parse(a))},[]),t.useEffect(()=>{n.length>0&&localStorage.setItem("tweets",JSON.stringify(n))},[n]);const o=F({initialValues:{content:""},onSubmit:(s,{resetForm:a})=>{const r=[{id:Date.now(),text:s.content,image:x,likes:0,retweets:0,comments:[]},...n];d(r),localStorage.setItem("tweets",JSON.stringify(r)),a(),h(null)},validationSchema:W}),f=s=>{const a=n.filter(p=>p.id!==s);d(a),localStorage.setItem("tweets",JSON.stringify(a))},g=(s,a)=>{const p=n.map(r=>r.id===s?{...r,text:a}:r);d(p),localStorage.setItem("tweets",JSON.stringify(p))},N=s=>{i(!0);const a=s.target.files[0];h(URL.createObjectURL(a)),i(!1)};return e.jsx("div",{className:` ${m?"dark-mode":""}`,children:e.jsxs("div",{className:"py-5 position-sticky top-0",children:[e.jsxs("div",{className:"profile-container mb-3",children:[e.jsx(C,{className:"profile-avatar",children:e.jsx("img",{src:"https://i.pravatar.cc/150?img=5",alt:"Profile"})}),e.jsx("span",{className:"profile-name",children:(c==null?void 0:c.fullName)||"Unknown"})]}),e.jsx("div",{className:"tweet-input-container",children:e.jsxs("form",{onSubmit:o.handleSubmit,children:[e.jsxs("div",{className:"mb-2 input-wrapper",children:[e.jsx("input",{type:"text",name:"content",placeholder:"What is happening?",className:"form-control border-0 tweet-input",...o.getFieldProps("content")}),o.errors.content&&o.touched.content&&e.jsx("span",{className:"text-danger small",children:o.errors.content})]}),x&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:x,alt:"Selected",className:"img-fluid rounded tweet-img"})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("label",{className:"icon-label",children:[e.jsx(_,{className:"icon-style"}),e.jsx("input",{type:"file",name:"imagefile",className:"d-none",onChange:N})]}),e.jsx(z,{className:"icon-style"}),e.jsx(G,{className:"icon-style"})]}),e.jsx(w,{className:"tweet-btn",variant:"contained",type:"submit",disabled:l||o.isSubmitting,children:"Tweet"})]})]})}),e.jsx("section",{children:n.map(s=>e.jsx(V,{tweet:s,user:c,onDelete:f,onEdit:g},s.id))})]})})};export{se as default};
